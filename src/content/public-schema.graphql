# MediaJel Public API Schema
# This is a curated subset of the full GraphQL schema exposed to external developers.
# Only operations and types listed here are documented in the public API portal.

scalar JSON
scalar DateTime

# ─── Authentication ──────────────────────────────────────────────

input AuthSignInInput {
  username: String!
  password: String!
}

type AuthSignInPayload {
  accessToken: String!
  idToken: String
  refreshToken: String
}

# ─── Pagination ──────────────────────────────────────────────────

type PageInfo {
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  startCursor: String
  endCursor: String
}

type AggregateOrg {
  count: Int!
}

type OrgConnection {
  pageInfo: PageInfo!
  edges: [OrgEdge]!
  aggregate: AggregateOrg!
}

type OrgEdge {
  node: Org!
  cursor: String!
}

type AggregateCampaign {
  count: Int!
}

type CampaignConnection {
  pageInfo: PageInfo!
  edges: [CampaignEdge]!
  aggregate: AggregateCampaign!
}

type CampaignEdge {
  node: Campaign!
  cursor: String!
}

type AggregateCampaignOrder {
  count: Int!
}

type CampaignOrderConnection {
  pageInfo: PageInfo!
  edges: [CampaignOrderEdge]!
  aggregate: AggregateCampaignOrder!
}

type CampaignOrderEdge {
  node: CampaignOrder!
  cursor: String!
}

type AggregateLineItem {
  count: Int!
}

type LineItemConnection {
  pageInfo: PageInfo!
  edges: [LineItemEdge]!
  aggregate: AggregateLineItem!
}

type LineItemEdge {
  node: LineItem!
  cursor: String!
}

# ─── Organization Types ─────────────────────────────────────────

type Org {
  id: ID!
  name: String
  slug: String
  website: String
  logoUrl: String
  enabled: Boolean
  parentOrg: Org
  childOrgs: [Org!]
  campaigns: [Campaign!]
  createdAt: DateTime
  updatedAt: DateTime
}

input OrgWhereUniqueInput {
  id: ID
  slug: String
}

input OrgWhereInput {
  id: ID
  id_in: [ID!]
  name: String
  name_contains: String
  slug: String
  enabled: Boolean
  parentOrg: OrgWhereInput
  createdAt_gte: DateTime
  createdAt_lte: DateTime
  updatedAt_gte: DateTime
  updatedAt_lte: DateTime
  AND: [OrgWhereInput!]
  OR: [OrgWhereInput!]
}

enum OrgOrderByInput {
  id_ASC
  id_DESC
  name_ASC
  name_DESC
  slug_ASC
  slug_DESC
  createdAt_ASC
  createdAt_DESC
  updatedAt_ASC
  updatedAt_DESC
}

# ─── Campaign Types ──────────────────────────────────────────────

type Campaign {
  id: ID!
  name: String
  status: CampaignStatus
  org: Org
  campaignOrders: [CampaignOrder!]
  createdAt: DateTime
  updatedAt: DateTime
}

enum CampaignStatus {
  ACTIVE
  PAUSED
  COMPLETED
  DRAFT
  ARCHIVED
}

input CampaignWhereUniqueInput {
  id: ID
}

input CampaignWhereInput {
  id: ID
  id_in: [ID!]
  name: String
  name_contains: String
  status: CampaignStatus
  org: OrgWhereInput
  createdAt_gte: DateTime
  createdAt_lte: DateTime
  updatedAt_gte: DateTime
  updatedAt_lte: DateTime
  AND: [CampaignWhereInput!]
  OR: [CampaignWhereInput!]
}

enum CampaignOrderByInput {
  id_ASC
  id_DESC
  name_ASC
  name_DESC
  status_ASC
  status_DESC
  createdAt_ASC
  createdAt_DESC
  updatedAt_ASC
  updatedAt_DESC
}

# ─── Campaign Order Types ────────────────────────────────────────

enum CampaignOrderType {
  DISPLAY
  VIDEO
  SOCIAL
  CPC
  OOH
  DOOH
  NATIVE
  PREMIUM_DISPLAY
  RICH_MEDIA
  TV_OTT_STANDARD
  TV_OTT_PREMIUM
}

enum KPI {
  CPM
  CPC
  CPA
}

type PacingData {
  totalImpressions: Float
  dailyAvgImpressions: Float
  budgetSpent: Float
  budgetLeft: Float
  daysLeft: Int
  daysIntoFlight: Int
  pace: Float
  paceYesterday: Float
  ctr: Float
  roas: Float
}

type AggregateData {
  impressions: Float
  clicks: Float
  cost: Float
  totalCost: Float
  events: Float
  transactions: Float
  totalRevenue: Float
}

type CampaignOrder {
  id: ID!
  name: String
  type: CampaignOrderType
  kpi: KPI
  kpiGoal: Float
  advertiserName: String
  startDate: DateTime
  endDate: DateTime
  budget: Float
  status: String
  campaign: Campaign
  org: Org
  pacingData: PacingData
  aggregateData: AggregateData
  createdAt: DateTime
  updatedAt: DateTime
}

input CampaignOrderWhereUniqueInput {
  id: ID
}

input CampaignOrderWhereInput {
  id: ID
  id_in: [ID!]
  name: String
  name_contains: String
  status: String
  campaign: CampaignWhereInput
  org: OrgWhereInput
  startDate_gte: DateTime
  startDate_lte: DateTime
  endDate_gte: DateTime
  endDate_lte: DateTime
  createdAt_gte: DateTime
  createdAt_lte: DateTime
  AND: [CampaignOrderWhereInput!]
  OR: [CampaignOrderWhereInput!]
}

enum CampaignOrderOrderByInput {
  id_ASC
  id_DESC
  name_ASC
  name_DESC
  startDate_ASC
  startDate_DESC
  endDate_ASC
  endDate_DESC
  createdAt_ASC
  createdAt_DESC
  updatedAt_ASC
  updatedAt_DESC
}

# ─── Line Item Types ─────────────────────────────────────────────

enum LineItemStatus {
  ACTIVE
  PAUSED
  COMPLETED
  DRAFT
  ARCHIVED
}

type LineItem {
  id: ID!
  name: String
  campaign: Campaign
  budgetTotal: Float
  startDate: DateTime
  endDate: DateTime
  status: LineItemStatus
  cpm: Float
  clicks: Int
  impressions: Int
  ctr: Float
  aggregateData: AggregateData
  createdAt: DateTime
  updatedAt: DateTime
}

input LineItemWhereUniqueInput {
  id: ID
}

input LineItemWhereInput {
  id: ID
  id_in: [ID!]
  name: String
  name_contains: String
  status: LineItemStatus
  campaign: CampaignWhereInput
  startDate_gte: DateTime
  startDate_lte: DateTime
  endDate_gte: DateTime
  endDate_lte: DateTime
  createdAt_gte: DateTime
  createdAt_lte: DateTime
  AND: [LineItemWhereInput!]
  OR: [LineItemWhereInput!]
}

enum LineItemOrderByInput {
  id_ASC
  id_DESC
  name_ASC
  name_DESC
  startDate_ASC
  startDate_DESC
  endDate_ASC
  endDate_DESC
  createdAt_ASC
  createdAt_DESC
  updatedAt_ASC
  updatedAt_DESC
}

# ─── Queries ─────────────────────────────────────────────────────

type Query {
  """Retrieve a single organization by ID or slug."""
  org(where: OrgWhereUniqueInput!): Org

  """List organizations with optional filtering and pagination."""
  orgs(
    where: OrgWhereInput
    orderBy: OrgOrderByInput
    skip: Int
    after: String
    before: String
    first: Int
    last: Int
  ): [Org]!

  """Paginated organization listing with connection metadata."""
  orgsConnection(
    where: OrgWhereInput
    orderBy: OrgOrderByInput
    skip: Int
    after: String
    before: String
    first: Int
    last: Int
  ): OrgConnection!

  """Retrieve a single campaign by ID."""
  campaign(where: CampaignWhereUniqueInput!): Campaign

  """List campaigns with optional filtering and pagination."""
  campaigns(
    where: CampaignWhereInput
    orderBy: CampaignOrderByInput
    skip: Int
    after: String
    before: String
    first: Int
    last: Int
  ): [Campaign]!

  """Paginated campaign listing with connection metadata."""
  campaignsConnection(
    where: CampaignWhereInput
    orderBy: CampaignOrderByInput
    skip: Int
    after: String
    before: String
    first: Int
    last: Int
  ): CampaignConnection!

  """Retrieve a single campaign order by ID."""
  campaignOrder(where: CampaignOrderWhereUniqueInput!): CampaignOrder

  """List campaign orders with optional filtering and pagination."""
  campaignOrders(
    where: CampaignOrderWhereInput
    orderBy: CampaignOrderOrderByInput
    skip: Int
    after: String
    before: String
    first: Int
    last: Int
  ): [CampaignOrder]!

  """Paginated campaign orders with connection metadata."""
  campaignOrdersConnection(
    where: CampaignOrderWhereInput
    orderBy: CampaignOrderOrderByInput
    skip: Int
    after: String
    before: String
    first: Int
    last: Int
  ): CampaignOrderConnection!

  """Retrieve a single line item by ID."""
  lineItem(where: LineItemWhereUniqueInput!): LineItem

  """List line items with optional filtering and pagination."""
  lineItems(
    where: LineItemWhereInput
    orderBy: LineItemOrderByInput
    skip: Int
    after: String
    before: String
    first: Int
    last: Int
  ): [LineItem]!

  """Paginated line items with connection metadata."""
  lineItemsConnection(
    where: LineItemWhereInput
    orderBy: LineItemOrderByInput
    skip: Int
    after: String
    before: String
    first: Int
    last: Int
  ): LineItemConnection!
}

# ─── Mutations ───────────────────────────────────────────────────

type Mutation {
  """Authenticate with Cognito credentials. Returns JWT tokens for API access."""
  authSignIn(data: AuthSignInInput!): AuthSignInPayload
}
